{% sw_extends '@Storefront/storefront/page/account/profile/index.html.twig' %}

{% block page_account_profile_personal_form %}
    <form id="profilePersonalForm"
          method="post"
          data-form-csrf-handler="true"
          action="{{ path('frontend.account.profile.save') }}"
          data-form-validation="true">

        {% block page_account_profile_personal_form_csrf %}
            {{ parent() }}
        {% endblock %}

        {% block page_account_profile_personal_fields %}
            {{ parent() }}
        {% endblock %}

        <div class="{{ formRowClass }} account-profile-personal-action-container">
            {% block page_account_profile_personal_required %}
                <p class="col-12 col-md-8 account-profile-required-info required-fields">
                    {{ "general.requiredFields"|trans|sw_sanitize }}
                </p>
            {% endblock %}

            {% block page_account_profile_personal_action_buttons %}
                <div class="col-12 col-md-4 card-actions {% if feature('V6_5_0_0') %}ps-md-0 {% else %}pl-md-0{% endif %} d-flex justify-content-end">
                    {% block page_account_profile_personal_action_button_send %}
                        <button type="submit"
                                class="profile-form-submit btn btn-outline-primary btn-sm {% if not feature('V6_5_0_0') %}btn-block{% endif %}"
                                title="{{ "account.profileSaveChanges"|trans|striptags }}">
                            {{ "account.profileSaveChanges"|trans|sw_sanitize }}
                        </button>
                    {% endblock %}
                </div>
            {% endblock %}
        </div>
    </form>
{% endblock %}

{% block page_account_profile_credentials_container %}
    <div class="row align-items-center">
        {% block page_account_profile_credentials_current_mail %}
            <div class="col-12 col-md-6 account-profile-credentials-current-mail">
                {% block page_account_profile_credentials_current_mail_label %}
                    <span class="account-profile-mail-label">{{ "account.profileCurrentMail"|trans|sw_sanitize }}</span>
                    <span class="account-profile-mail">{{ context.customer.email }}</span>
                {% endblock %}
            </div>
        {% endblock %}

        <div class="col-auto col-md text-md-right account-profile-change">
            {% block page_account_profile_credentials_change_mail %}
                <a {% if not emailFormViolation %}class="collapsed"{% endif %}
                   {{ dataBsToggleAttr }}="collapse"
                   href="#profile-email-form"
                   role="button"
                   aria-expanded="{% if emailFormViolation %}true{% else %}false{% endif %}"
                   aria-controls="profile-email-form">
                    {{ "account.profileChangeEmail"|trans|sw_sanitize }}
                </a>
            {% endblock %}

            {% block page_account_profile_credentials_change_password %}
                <a class="account-profile-change-password{% if not passwordFormViolation %} collapsed{% endif %}"
                   {{ dataBsToggleAttr }}="collapse"
                   href="#profile-password-form"
                   role="button"
                   aria-expanded="{% if passwordFormViolation %}true{% else %}false{% endif %}"
                   aria-controls="profile-password-form">
                    {{ "account.profileChangePassword"|trans|sw_sanitize }}
                </a>
            {% endblock %}
        </div>
    </div>
{% endblock %}
