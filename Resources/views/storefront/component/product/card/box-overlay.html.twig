{% sw_extends '@Storefront/storefront/component/product/card/box-standard.html.twig' %}

{% block component_product_box %}
    {% if product %}
        <div class="product-overlay shadow rounded">
            <div class="product-overlay__content">
                <div class="product-overview">
                    {% block component_product_box_rating %}
                        {{ parent() }}
                    {% endblock %}

                    {% block component_product_box_name %}
                        {{ parent() }}
                    {% endblock %}

                    <div class="product-variant-characteristics">
                        {% for variation in product.variation %}
                            <span class="product-variant-characteristics-group">{{ variation.group }}:</span>
                            <span class="product-variant-characteristics-option">
                            {{ variation.option }}
                        </span>
                            {% if product.variation|last != variation %}
                                |
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>

                {% block component_product_box_price %}
                    {{ parent() }}
                {% endblock %}

                {% if config('core.cart.wishlistEnabled') %}
                    {% if wishListPage %}
                        <div class="product-wishlist product-wishlist-remove">
                                {% set size = size ?? 'md' %}
                                <form action="{{ path('frontend.wishlist.product.delete', {'id': id}) }}"
                                      method="post"
                                      class="product-wishlist-form">

                                    {% block component_product_box_wishlist_remove_csrf %}
                                        {{ sw_csrf('frontend.wishlist.product.delete') }}
                                    {% endblock %}

                                    {% block component_product_wishlist_remove_redirect %}
                                        <input type="hidden"
                                               name="redirectTo"
                                               value="frontend.wishlist.page"/>
                                    {% endblock %}

                                    {% block component_product_wishlist_remove_submit %}
                                        <button type="submit" class="btn product-wishlist-btn product-wishlist-btn-remove">

                                            {% sw_icon 'heart-fill' style { 'class': 'wishlist icon-wishlist-added', 'size': size } %}
                                        </button>
                                    {% endblock %}
                                </form>
                            </div>
                    {% else %}
                        <div class="product-wishlist-button">
                            {% block component_product_box_wishlist_action %}
                                {% sw_include '@Storefront/storefront/component/product/card/wishlist.html.twig' with {
                                    appearance: 'circle',
                                    productId: id
                                } %}
                            {% endblock %}
                        </div>
                    {% endif %}
                {% endif %}
            </div>

            <div class="product-overlay__action">
                <hr>
                {% block component_product_box_price_unit %}
                    {% sw_include '@Storefront/storefront/component/product/card/box-price-unit.html.twig' %}
                {% endblock %}

                {% block component_product_box_action %}
                    {{ parent() }}
                {% endblock %}
            </div>
        </div>
    {% endif %}
{% endblock %}
